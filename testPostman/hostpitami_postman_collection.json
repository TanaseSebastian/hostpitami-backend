{
  "info": {
    "_postman_id": "4c8ae5bf-735c-41cd-bb14-3c78007145b4",
    "name": "Hostpitami API (localhost:8080)",
    "schema": "https://schema.getpostman.com/json/collection/v2.1.0/collection.json",
    "description": "Generated from provided OpenAPI snippet. Set variables in the environment (baseUrl, token, structureId, roomId, planId, bookingId, publicToken)."
  },
  "item": [
    {
      "name": "Auth",
      "item": [
        {
          "name": "Register",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/api/auth/register",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "api",
                "auth",
                "register"
              ]
            },
            "body": {
              "mode": "raw",
              "raw": "{\n  \"fullName\": \"Test User\",\n  \"email\": \"test@example.com\",\n  \"password\": \"Password123!\"\n}"
            }
          },
          "event": [
            {
              "listen": "test",
              "script": {
                "type": "text/javascript",
                "exec": [
                  "pm.test(\"Status code is 200\", function () {",
                  "  pm.response.to.have.status(200);",
                  "});",
                  "",
                  "const json = pm.response.json();",
                  "if (json && json.token) {",
                  "  pm.collectionVariables.set(\"token\", json.token);",
                  "  pm.collectionVariables.set(\"tokenType\", json.tokenType || \"Bearer\");",
                  "  pm.test(\"Token saved to collection variables\", function () {",
                  "    pm.expect(pm.collectionVariables.get(\"token\")).to.be.ok;",
                  "  });",
                  "}"
                ]
              }
            }
          ]
        },
        {
          "name": "Login",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/api/auth/login",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "api",
                "auth",
                "login"
              ]
            },
            "body": {
              "mode": "raw",
              "raw": "{\n  \"email\": \"test@example.com\",\n  \"password\": \"Password123!\"\n}"
            }
          },
          "event": [
            {
              "listen": "test",
              "script": {
                "type": "text/javascript",
                "exec": [
                  "pm.test(\"Status code is 200\", function () {",
                  "  pm.response.to.have.status(200);",
                  "});",
                  "",
                  "const json = pm.response.json();",
                  "if (json && json.token) {",
                  "  pm.collectionVariables.set(\"token\", json.token);",
                  "  pm.collectionVariables.set(\"tokenType\", json.tokenType || \"Bearer\");",
                  "  pm.test(\"Token saved to collection variables\", function () {",
                  "    pm.expect(pm.collectionVariables.get(\"token\")).to.be.ok;",
                  "  });",
                  "}"
                ]
              }
            }
          ]
        },
        {
          "name": "Me",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/api/auth/me",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "api",
                "auth",
                "me"
              ]
            }
          },
          "event": [
            {
              "listen": "test",
              "script": {
                "type": "text/javascript",
                "exec": [
                  "pm.test(\"Status code is 200\", function () {",
                  "  pm.response.to.have.status(200);",
                  "});"
                ]
              }
            }
          ]
        },
        {
          "name": "Forgot Password",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/api/auth/forgot-password",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "api",
                "auth",
                "forgot-password"
              ]
            },
            "body": {
              "mode": "raw",
              "raw": "{\n  \"email\": \"test@example.com\"\n}"
            }
          },
          "event": [
            {
              "listen": "test",
              "script": {
                "type": "text/javascript",
                "exec": [
                  "pm.test(\"Status code is 200\", function () {",
                  "  pm.response.to.have.status(200);",
                  "});"
                ]
              }
            }
          ]
        },
        {
          "name": "Reset Password",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/api/auth/reset-password",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "api",
                "auth",
                "reset-password"
              ]
            },
            "body": {
              "mode": "raw",
              "raw": "{\n  \"token\": \"{{resetToken}}\",\n  \"newPassword\": \"Password123!\"\n}"
            }
          },
          "event": [
            {
              "listen": "test",
              "script": {
                "type": "text/javascript",
                "exec": [
                  "pm.test(\"Status code is 200\", function () {",
                  "  pm.response.to.have.status(200);",
                  "});"
                ]
              }
            }
          ]
        }
      ]
    },
    {
      "name": "Admin — Structures",
      "item": [
        {
          "name": "List Structures",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/api/admin/structures",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "api",
                "admin",
                "structures"
              ]
            }
          },
          "event": [
            {
              "listen": "test",
              "script": {
                "type": "text/javascript",
                "exec": [
                  "pm.test(\"Status code is 200\", function () {",
                  "  pm.response.to.have.status(200);",
                  "});"
                ]
              }
            }
          ]
        },
        {
          "name": "Create Structure",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/api/admin/structures",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "api",
                "admin",
                "structures"
              ]
            },
            "body": {
              "mode": "raw",
              "raw": "{\n  \"name\": \"Demo Structure\",\n  \"type\": \"BNB\",\n  \"slug\": \"demo-structure\",\n  \"phone\": \"+390000000000\",\n  \"email\": \"demo@hostpitami.it\",\n  \"addressLine\": \"Via Roma 1\",\n  \"city\": \"Bari\",\n  \"postalCode\": \"70100\",\n  \"country\": \"IT\",\n  \"timezone\": \"Europe/Rome\",\n  \"currency\": \"EUR\"\n}"
            }
          },
          "event": [
            {
              "listen": "test",
              "script": {
                "type": "text/javascript",
                "exec": [
                  "pm.test(\"Status code is 200\", function () {",
                  "  pm.response.to.have.status(200);",
                  "});"
                ]
              }
            }
          ]
        },
        {
          "name": "Get Structure",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/api/admin/structures/{{structureId}}",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "api",
                "admin",
                "structures",
                "{{structureId}}"
              ]
            }
          },
          "description": "Set {{structureId}} from list/create responses.",
          "event": [
            {
              "listen": "test",
              "script": {
                "type": "text/javascript",
                "exec": [
                  "pm.test(\"Status code is 200\", function () {",
                  "  pm.response.to.have.status(200);",
                  "});"
                ]
              }
            }
          ]
        },
        {
          "name": "Update Structure (PATCH)",
          "request": {
            "method": "PATCH",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/api/admin/structures/{{structureId}}",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "api",
                "admin",
                "structures",
                "{{structureId}}"
              ]
            },
            "body": {
              "mode": "raw",
              "raw": "{\n  \"name\": \"Demo Structure (Updated)\",\n  \"seoTitle\": \"Demo \\u2014 Hostpitami\",\n  \"seoDescription\": \"Descrizione SEO\"\n}"
            }
          },
          "event": [
            {
              "listen": "test",
              "script": {
                "type": "text/javascript",
                "exec": [
                  "pm.test(\"Status code is 200\", function () {",
                  "  pm.response.to.have.status(200);",
                  "});"
                ]
              }
            }
          ]
        },
        {
          "name": "Archive Structure",
          "request": {
            "method": "POST",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/api/admin/structures/{{structureId}}/archive",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "api",
                "admin",
                "structures",
                "{{structureId}}",
                "archive"
              ]
            }
          },
          "event": [
            {
              "listen": "test",
              "script": {
                "type": "text/javascript",
                "exec": [
                  "pm.test(\"Status code is 200\", function () {",
                  "  pm.response.to.have.status(200);",
                  "});"
                ]
              }
            }
          ]
        },
        {
          "name": "Restore Structure",
          "request": {
            "method": "POST",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/api/admin/structures/{{structureId}}/restore",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "api",
                "admin",
                "structures",
                "{{structureId}}",
                "restore"
              ]
            }
          },
          "event": [
            {
              "listen": "test",
              "script": {
                "type": "text/javascript",
                "exec": [
                  "pm.test(\"Status code is 200\", function () {",
                  "  pm.response.to.have.status(200);",
                  "});"
                ]
              }
            }
          ]
        },
        {
          "name": "Publish Structure",
          "request": {
            "method": "POST",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/api/admin/structures/{{structureId}}/publish",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "api",
                "admin",
                "structures",
                "{{structureId}}",
                "publish"
              ]
            }
          },
          "event": [
            {
              "listen": "test",
              "script": {
                "type": "text/javascript",
                "exec": [
                  "pm.test(\"Status code is 200\", function () {",
                  "  pm.response.to.have.status(200);",
                  "});"
                ]
              }
            }
          ]
        },
        {
          "name": "Unpublish Structure",
          "request": {
            "method": "POST",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/api/admin/structures/{{structureId}}/unpublish",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "api",
                "admin",
                "structures",
                "{{structureId}}",
                "unpublish"
              ]
            }
          },
          "event": [
            {
              "listen": "test",
              "script": {
                "type": "text/javascript",
                "exec": [
                  "pm.test(\"Status code is 200\", function () {",
                  "  pm.response.to.have.status(200);",
                  "});"
                ]
              }
            }
          ]
        },
        {
          "name": "Duplicate Structure",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/api/admin/structures/{{structureId}}/duplicate",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "api",
                "admin",
                "structures",
                "{{structureId}}",
                "duplicate"
              ]
            },
            "body": {
              "mode": "raw",
              "raw": "{\n  \"newName\": \"Demo Structure Copy\",\n  \"copyRooms\": true,\n  \"copyRates\": true,\n  \"copyPolicies\": true\n}"
            }
          },
          "event": [
            {
              "listen": "test",
              "script": {
                "type": "text/javascript",
                "exec": [
                  "pm.test(\"Status code is 200\", function () {",
                  "  pm.response.to.have.status(200);",
                  "});"
                ]
              }
            }
          ]
        },
        {
          "name": "Website Preview",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/api/admin/structures/{{structureId}}/website/preview",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "api",
                "admin",
                "structures",
                "{{structureId}}",
                "website",
                "preview"
              ]
            }
          },
          "event": [
            {
              "listen": "test",
              "script": {
                "type": "text/javascript",
                "exec": [
                  "pm.test(\"Status code is 200\", function () {",
                  "  pm.response.to.have.status(200);",
                  "});"
                ]
              }
            }
          ]
        },
        {
          "name": "Website Regenerate",
          "request": {
            "method": "POST",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/api/admin/structures/{{structureId}}/website/regenerate",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "api",
                "admin",
                "structures",
                "{{structureId}}",
                "website",
                "regenerate"
              ]
            }
          },
          "event": [
            {
              "listen": "test",
              "script": {
                "type": "text/javascript",
                "exec": [
                  "pm.test(\"Status code is 200\", function () {",
                  "  pm.response.to.have.status(200);",
                  "});"
                ]
              }
            }
          ]
        },
        {
          "name": "Delete Structure",
          "request": {
            "method": "DELETE",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/api/admin/structures/{{structureId}}?hard=false",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "api",
                "admin",
                "structures",
                "{{structureId}}"
              ],
              "query": [
                {
                  "key": "hard",
                  "value": "false"
                }
              ]
            }
          },
          "event": [
            {
              "listen": "test",
              "script": {
                "type": "text/javascript",
                "exec": [
                  "pm.test(\"Status code is 200\", function () {",
                  "  pm.response.to.have.status(200);",
                  "});"
                ]
              }
            }
          ]
        }
      ]
    },
    {
      "name": "Admin — Rooms",
      "item": [
        {
          "name": "List Rooms",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/api/admin/structures/{{structureId}}/rooms",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "api",
                "admin",
                "structures",
                "{{structureId}}",
                "rooms"
              ]
            }
          },
          "event": [
            {
              "listen": "test",
              "script": {
                "type": "text/javascript",
                "exec": [
                  "pm.test(\"Status code is 200\", function () {",
                  "  pm.response.to.have.status(200);",
                  "});"
                ]
              }
            }
          ]
        },
        {
          "name": "Create Room",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/api/admin/structures/{{structureId}}/rooms",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "api",
                "admin",
                "structures",
                "{{structureId}}",
                "rooms"
              ]
            },
            "body": {
              "mode": "raw",
              "raw": "{\n  \"name\": \"Camera Deluxe\",\n  \"type\": \"ROOM\",\n  \"slug\": \"camera-deluxe\",\n  \"quantity\": 1,\n  \"maxAdults\": 2,\n  \"maxChildren\": 1,\n  \"description\": \"Camera demo\",\n  \"bedInfo\": \"1 letto matrimoniale\",\n  \"sizeMq\": 18,\n  \"amenities\": \"WiFi, Aria condizionata\",\n  \"coverImageUrl\": \"https://picsum.photos/seed/room/1200/800\"\n}"
            }
          },
          "event": [
            {
              "listen": "test",
              "script": {
                "type": "text/javascript",
                "exec": [
                  "pm.test(\"Status code is 200\", function () {",
                  "  pm.response.to.have.status(200);",
                  "});"
                ]
              }
            }
          ]
        },
        {
          "name": "Get Room",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/api/admin/structures/{{structureId}}/rooms/{{roomId}}",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "api",
                "admin",
                "structures",
                "{{structureId}}",
                "rooms",
                "{{roomId}}"
              ]
            }
          },
          "event": [
            {
              "listen": "test",
              "script": {
                "type": "text/javascript",
                "exec": [
                  "pm.test(\"Status code is 200\", function () {",
                  "  pm.response.to.have.status(200);",
                  "});"
                ]
              }
            }
          ]
        },
        {
          "name": "Update Room (PATCH)",
          "request": {
            "method": "PATCH",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/api/admin/structures/{{structureId}}/rooms/{{roomId}}",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "api",
                "admin",
                "structures",
                "{{structureId}}",
                "rooms",
                "{{roomId}}"
              ]
            },
            "body": {
              "mode": "raw",
              "raw": "{\n  \"name\": \"Camera Deluxe (Updated)\",\n  \"maxAdults\": 3\n}"
            }
          },
          "event": [
            {
              "listen": "test",
              "script": {
                "type": "text/javascript",
                "exec": [
                  "pm.test(\"Status code is 200\", function () {",
                  "  pm.response.to.have.status(200);",
                  "});"
                ]
              }
            }
          ]
        },
        {
          "name": "Archive Room",
          "request": {
            "method": "POST",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/api/admin/structures/{{structureId}}/rooms/{{roomId}}/archive",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "api",
                "admin",
                "structures",
                "{{structureId}}",
                "rooms",
                "{{roomId}}",
                "archive"
              ]
            }
          },
          "event": [
            {
              "listen": "test",
              "script": {
                "type": "text/javascript",
                "exec": [
                  "pm.test(\"Status code is 200\", function () {",
                  "  pm.response.to.have.status(200);",
                  "});"
                ]
              }
            }
          ]
        },
        {
          "name": "Restore Room",
          "request": {
            "method": "POST",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/api/admin/structures/{{structureId}}/rooms/{{roomId}}/restore",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "api",
                "admin",
                "structures",
                "{{structureId}}",
                "rooms",
                "{{roomId}}",
                "restore"
              ]
            }
          },
          "event": [
            {
              "listen": "test",
              "script": {
                "type": "text/javascript",
                "exec": [
                  "pm.test(\"Status code is 200\", function () {",
                  "  pm.response.to.have.status(200);",
                  "});"
                ]
              }
            }
          ]
        },
        {
          "name": "Delete Room",
          "request": {
            "method": "DELETE",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/api/admin/structures/{{structureId}}/rooms/{{roomId}}?hard=false",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "api",
                "admin",
                "structures",
                "{{structureId}}",
                "rooms",
                "{{roomId}}"
              ],
              "query": [
                {
                  "key": "hard",
                  "value": "false"
                }
              ]
            }
          },
          "event": [
            {
              "listen": "test",
              "script": {
                "type": "text/javascript",
                "exec": [
                  "pm.test(\"Status code is 200\", function () {",
                  "  pm.response.to.have.status(200);",
                  "});"
                ]
              }
            }
          ]
        }
      ]
    },
    {
      "name": "Admin — Rates",
      "item": [
        {
          "name": "List Rate Plans",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/api/admin/structures/{{structureId}}/rates/plans",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "api",
                "admin",
                "structures",
                "{{structureId}}",
                "rates",
                "plans"
              ]
            }
          },
          "event": [
            {
              "listen": "test",
              "script": {
                "type": "text/javascript",
                "exec": [
                  "pm.test(\"Status code is 200\", function () {",
                  "  pm.response.to.have.status(200);",
                  "});"
                ]
              }
            }
          ]
        },
        {
          "name": "Create Rate Plan",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/api/admin/structures/{{structureId}}/rates/plans",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "api",
                "admin",
                "structures",
                "{{structureId}}",
                "rates",
                "plans"
              ]
            },
            "body": {
              "mode": "raw",
              "raw": "{\n  \"name\": \"Standard\",\n  \"code\": \"STD\",\n  \"appliesToAllRooms\": true,\n  \"basePriceCents\": 12000,\n  \"defaultMinStay\": 1,\n  \"discountPercent\": 0\n}"
            }
          },
          "event": [
            {
              "listen": "test",
              "script": {
                "type": "text/javascript",
                "exec": [
                  "pm.test(\"Status code is 200\", function () {",
                  "  pm.response.to.have.status(200);",
                  "});"
                ]
              }
            }
          ]
        },
        {
          "name": "Update Rate Plan (PATCH)",
          "request": {
            "method": "PATCH",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/api/admin/structures/{{structureId}}/rates/plans/{{planId}}",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "api",
                "admin",
                "structures",
                "{{structureId}}",
                "rates",
                "plans",
                "{{planId}}"
              ]
            },
            "body": {
              "mode": "raw",
              "raw": "{\n  \"name\": \"Standard (Updated)\",\n  \"active\": true,\n  \"basePriceCents\": 13000\n}"
            }
          },
          "event": [
            {
              "listen": "test",
              "script": {
                "type": "text/javascript",
                "exec": [
                  "pm.test(\"Status code is 200\", function () {",
                  "  pm.response.to.have.status(200);",
                  "});"
                ]
              }
            }
          ]
        },
        {
          "name": "Delete Rate Plan",
          "request": {
            "method": "DELETE",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/api/admin/structures/{{structureId}}/rates/plans/{{planId}}",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "api",
                "admin",
                "structures",
                "{{structureId}}",
                "rates",
                "plans",
                "{{planId}}"
              ]
            }
          },
          "event": [
            {
              "listen": "test",
              "script": {
                "type": "text/javascript",
                "exec": [
                  "pm.test(\"Status code is 200\", function () {",
                  "  pm.response.to.have.status(200);",
                  "});"
                ]
              }
            }
          ]
        },
        {
          "name": "Set Plan Rooms",
          "request": {
            "method": "PUT",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/api/admin/structures/{{structureId}}/rates/plans/{{planId}}/rooms",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "api",
                "admin",
                "structures",
                "{{structureId}}",
                "rates",
                "plans",
                "{{planId}}",
                "rooms"
              ]
            },
            "body": {
              "mode": "raw",
              "raw": "{\n  \"roomIds\": [\n    \"{{roomId}}\"\n  ]\n}"
            }
          },
          "event": [
            {
              "listen": "test",
              "script": {
                "type": "text/javascript",
                "exec": [
                  "pm.test(\"Status code is 200\", function () {",
                  "  pm.response.to.have.status(200);",
                  "});"
                ]
              }
            }
          ]
        },
        {
          "name": "Get Room Calendar (Rates)",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/api/admin/structures/{{structureId}}/rates/plans/{{planId}}/rooms/{{roomId}}/calendar?from={{dateFrom}}&to={{dateTo}}",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "api",
                "admin",
                "structures",
                "{{structureId}}",
                "rates",
                "plans",
                "{{planId}}",
                "rooms",
                "{{roomId}}",
                "calendar"
              ],
              "query": [
                {
                  "key": "from",
                  "value": "{{dateFrom}}"
                },
                {
                  "key": "to",
                  "value": "{{dateTo}}"
                }
              ]
            }
          },
          "event": [
            {
              "listen": "test",
              "script": {
                "type": "text/javascript",
                "exec": [
                  "pm.test(\"Status code is 200\", function () {",
                  "  pm.response.to.have.status(200);",
                  "});"
                ]
              }
            }
          ]
        },
        {
          "name": "Set Calendar Range",
          "request": {
            "method": "PUT",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/api/admin/structures/{{structureId}}/rates/plans/{{planId}}/rooms/{{roomId}}/calendar",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "api",
                "admin",
                "structures",
                "{{structureId}}",
                "rates",
                "plans",
                "{{planId}}",
                "rooms",
                "{{roomId}}",
                "calendar"
              ]
            },
            "body": {
              "mode": "raw",
              "raw": "{\n  \"dateFrom\": \"{{dateFrom}}\",\n  \"dateTo\": \"{{dateTo}}\",\n  \"priceCents\": 15000,\n  \"minStay\": 1,\n  \"closed\": false\n}"
            }
          },
          "event": [
            {
              "listen": "test",
              "script": {
                "type": "text/javascript",
                "exec": [
                  "pm.test(\"Status code is 200\", function () {",
                  "  pm.response.to.have.status(200);",
                  "});"
                ]
              }
            }
          ]
        }
      ]
    },
    {
      "name": "Admin — Cancellation Policy",
      "item": [
        {
          "name": "Get Cancellation Policy",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/api/admin/structures/{{structureId}}/cancellation-policy",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "api",
                "admin",
                "structures",
                "{{structureId}}",
                "cancellation-policy"
              ]
            }
          },
          "event": [
            {
              "listen": "test",
              "script": {
                "type": "text/javascript",
                "exec": [
                  "pm.test(\"Status code is 200\", function () {",
                  "  pm.response.to.have.status(200);",
                  "});"
                ]
              }
            }
          ]
        },
        {
          "name": "Update Cancellation Policy",
          "request": {
            "method": "PUT",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/api/admin/structures/{{structureId}}/cancellation-policy",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "api",
                "admin",
                "structures",
                "{{structureId}}",
                "cancellation-policy"
              ]
            },
            "body": {
              "mode": "raw",
              "raw": "{\n  \"type\": \"FLEX\",\n  \"freeCancellationDays\": 7,\n  \"penaltyPercentage\": 100,\n  \"description\": \"Cancellazione gratuita fino a 7 giorni prima.\"\n}"
            }
          },
          "event": [
            {
              "listen": "test",
              "script": {
                "type": "text/javascript",
                "exec": [
                  "pm.test(\"Status code is 200\", function () {",
                  "  pm.response.to.have.status(200);",
                  "});"
                ]
              }
            }
          ]
        }
      ]
    },
    {
      "name": "Public — Booking Engine",
      "item": [
        {
          "name": "Search Availability",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/api/public/booking-engine/search",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "api",
                "public",
                "booking-engine",
                "search"
              ]
            },
            "body": {
              "mode": "raw",
              "raw": "{\n  \"structureId\": \"{{structureId}}\",\n  \"checkIn\": \"{{checkIn}}\",\n  \"checkOut\": \"{{checkOut}}\",\n  \"adults\": 2,\n  \"children\": 0\n}"
            }
          },
          "event": [
            {
              "listen": "test",
              "script": {
                "type": "text/javascript",
                "exec": [
                  "pm.test(\"Status code is 200\", function () {",
                  "  pm.response.to.have.status(200);",
                  "});"
                ]
              }
            }
          ]
        },
        {
          "name": "Quote",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/api/public/booking-engine/quote",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "api",
                "public",
                "booking-engine",
                "quote"
              ]
            },
            "body": {
              "mode": "raw",
              "raw": "{\n  \"structureId\": \"{{structureId}}\",\n  \"roomId\": \"{{roomId}}\",\n  \"ratePlanId\": \"{{planId}}\",\n  \"checkIn\": \"{{checkIn}}\",\n  \"checkOut\": \"{{checkOut}}\",\n  \"guestsCount\": 2,\n  \"upsells\": [\n    {\n      \"code\": \"BREAKFAST\",\n      \"qty\": 2\n    }\n  ]\n}"
            }
          },
          "event": [
            {
              "listen": "test",
              "script": {
                "type": "text/javascript",
                "exec": [
                  "pm.test(\"Status code is 200\", function () {",
                  "  pm.response.to.have.status(200);",
                  "});"
                ]
              }
            }
          ]
        },
        {
          "name": "Hold",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/api/public/booking-engine/hold",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "api",
                "public",
                "booking-engine",
                "hold"
              ]
            },
            "body": {
              "mode": "raw",
              "raw": "{\n  \"quote\": {\n    \"structureId\": \"{{structureId}}\",\n    \"roomId\": \"{{roomId}}\",\n    \"ratePlanId\": \"{{planId}}\",\n    \"checkIn\": \"{{checkIn}}\",\n    \"checkOut\": \"{{checkOut}}\",\n    \"guestsCount\": 2,\n    \"upsells\": []\n  },\n  \"guest\": {\n    \"firstName\": \"Mario\",\n    \"lastName\": \"Rossi\",\n    \"email\": \"mario.rossi@example.com\",\n    \"phone\": \"+39333111222\"\n  }\n}"
            }
          },
          "event": [
            {
              "listen": "test",
              "script": {
                "type": "text/javascript",
                "exec": [
                  "pm.test(\"Status code is 200\", function () {",
                  "  pm.response.to.have.status(200);",
                  "});"
                ]
              }
            }
          ]
        },
        {
          "name": "Checkout",
          "request": {
            "method": "POST",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/api/public/booking-engine/checkout/{{bookingId}}",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "api",
                "public",
                "booking-engine",
                "checkout",
                "{{bookingId}}"
              ]
            }
          },
          "event": [
            {
              "listen": "test",
              "script": {
                "type": "text/javascript",
                "exec": [
                  "pm.test(\"Status code is 200\", function () {",
                  "  pm.response.to.have.status(200);",
                  "});"
                ]
              }
            }
          ]
        },
        {
          "name": "Mock Payment Confirm",
          "request": {
            "method": "POST",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/api/public/booking-engine/payment/mock-confirm/{{bookingId}}",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "api",
                "public",
                "booking-engine",
                "payment",
                "mock-confirm",
                "{{bookingId}}"
              ]
            }
          },
          "event": [
            {
              "listen": "test",
              "script": {
                "type": "text/javascript",
                "exec": [
                  "pm.test(\"Status code is 200\", function () {",
                  "  pm.response.to.have.status(200);",
                  "});"
                ]
              }
            }
          ]
        },
        {
          "name": "Voucher HTML",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Accept",
                "value": "text/html"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/api/public/booking-engine/voucher/{{publicToken}}",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "api",
                "public",
                "booking-engine",
                "voucher",
                "{{publicToken}}"
              ]
            }
          },
          "event": [
            {
              "listen": "test",
              "script": {
                "type": "text/javascript",
                "exec": [
                  "pm.test(\"Status code is 200\", function () {",
                  "  pm.response.to.have.status(200);",
                  "});"
                ]
              }
            }
          ]
        },
        {
          "name": "Guest Calendar (.ics)",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Accept",
                "value": "text/calendar"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/api/public/booking-engine/calendar/{{publicToken}}.ics",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "api",
                "public",
                "booking-engine",
                "calendar",
                "{{publicToken}}.ics"
              ]
            }
          },
          "event": [
            {
              "listen": "test",
              "script": {
                "type": "text/javascript",
                "exec": [
                  "pm.test(\"Status code is 200\", function () {",
                  "  pm.response.to.have.status(200);",
                  "});"
                ]
              }
            }
          ]
        }
      ]
    }
  ],
  "auth": {
    "type": "bearer",
    "bearer": [
      {
        "key": "token",
        "value": "{{token}}",
        "type": "string"
      }
    ]
  },
  "variable": [
    {
      "key": "baseUrl",
      "value": "http://localhost:8080"
    },
    {
      "key": "token",
      "value": ""
    },
    {
      "key": "tokenType",
      "value": "Bearer"
    }
  ]
}